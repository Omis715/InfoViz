<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Circles</title>
    <script src="../vendor/d3-7.8.5/dist/d3.js"></script>
</head>
<body>
    <h1>Test: Are these circles or rectangles?</h1>
    <svg id="test-svg" width="960" height="600"></svg>

    <script>
        console.log('Script started');

        // Simple test data
        const testData = [
            { region: 'Europe', x: 200, y: 200, radius: 80, color: '#4a90e2' },
            { region: 'Asia', x: 400, y: 200, radius: 60, color: '#e94b8a' },
            { region: 'Americas', x: 600, y: 200, radius: 70, color: '#50c878' }
        ];

        console.log('Test data:', testData);

        const svg = d3.select('#test-svg');

        const groups = svg.selectAll('.test-circle')
            .data(testData)
            .enter()
            .append('g')
            .attr('class', 'test-circle')
            .attr('transform', d => `translate(${d.x},${d.y})`);

        console.log('Groups created');

        // Create CIRCLES
        groups.append('circle')
            .attr('r', d => {
                console.log(`Creating circle for ${d.region} with radius ${d.radius}`);
                return d.radius;
            })
            .attr('fill', d => d.color)
            .attr('stroke', '#333')
            .attr('stroke-width', 2);

        // Add labels
        groups.append('text')
            .attr('text-anchor', 'middle')
            .attr('dy', '0.3em')
            .style('font-size', '16px')
            .style('font-weight', 'bold')
            .style('fill', '#fff')
            .text(d => d.region);

        console.log('All circles created successfully');
        console.log('If you see circles above, the code works. If rectangles, there is a browser/CSS issue.');
    </script>
</body>
</html>
